<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Larp Adventures – Character Sheet</title>

  <!-- Styles -->
<link rel="stylesheet" href="styles-desktop.css" media="(min-width: 701px)" />
<link rel="stylesheet" href="styles-mobile.css"  media="(max-width: 700px)" />

  <!-- jsPDF for PDF export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>

<body>
  <h1>Larp Adventures</h1>
  <div class="subtitle">Character Sheet • Skills & Events Tracker</div>

  <!-- Top buttons -->
  <div class="top-controls">
    <div class="save-load-controls">
      <button class="button small secondary" id="loadCharacterBtn">Load Character</button>
      <button class="button small secondary" id="saveCharacterBtn">Save Character</button>
      <button class="button small secondary" id="exportPdfBtn">Export Character</button>
      <input type="file" id="loadCharacterFile" accept=".json" style="display:none;" />
    </div>
  </div>

  <div class="app">
    <!-- BASIC INFO -->
    <div class="card">
      <div class="card-inner">
        <h2>Basic Information</h2>
        <div class="section-row">
          <div class="field">
            <label for="characterName">Character Name</label>
            <input type="text" id="characterName" />
          </div>
          <div class="field">
            <label for="playerName">Player Name</label>
            <input type="text" id="playerName" />
          </div>
        </div>

        <div class="section-row">
          <div class="field">
            <label for="pathDisplay">Path</label>
            <select id="pathDisplay">
              <option value="">-- Select Path --</option>
              <option>Healer</option>
              <option>Mage</option>
              <option>Rogue</option>
              <option>Warrior</option>
            </select>
          </div>
          <div class="field">
            <label for="faction">Faction</label>
            <select id="faction">
              <option value="">-- Select Faction --</option>
              <option>Blackthorne Company</option>
              <option>Catalpa</option>
              <option>Cedar Hill</option>
              <option>Eponore</option>
              <option>Geth</option>
              <option>Grimfrost</option>
              <option>Guild of the Black Sky</option>
              <option>Kult of Tharros</option>
              <option>Mellondor</option>
              <option>Prismatic Troupe</option>
              <option>Sunsteel Company</option>
              <option>The Dismissed</option>
              <option>The Free Folk</option>
              <option>The Grove</option>
              <option>The House of Silver Branches</option>
              <option>The Order</option>
              <option>The Wardens</option>
              <option>The White Ravens</option>
              <option>Vidarian Khanate</option>
            </select>
          </div>
        </div>

        <!-- Secondary Paths / Professions -->
        <div class="section-row">
          <div class="field">
            <label for="secondaryPathsDisplay">Secondary path(s)</label>
            <input type="text" id="secondaryPathsDisplay" readonly />
          </div>
          <div class="field">
            <label for="professionsDisplay">Profession(s)</label>
            <input type="text" id="professionsDisplay" readonly />
          </div>
        </div>

        <!-- Tier & Organizations -->
        <div class="section-row">
          <div class="field">
            <label>Tier</label>
            <div class="inline">
              <input type="number" id="tier" readonly style="max-width:60px;" />
              <span class="pill">auto from events</span>
            </div>
          </div>
          <div class="field">
            <label>Organization(s)</label>
            <div id="organizationsContainer" class="org-grid">
              <label class="org-item">
                <input type="checkbox" value="Archivist Guild" /> Archivist Guild
              </label>
              <label class="org-item">
                <input type="checkbox" value="Merchant Guild" /> Merchant Guild
              </label>
              <label class="org-item">
                <input type="checkbox" value="Order of Light" /> Order of Light
              </label>
              <label class="org-item">
                <input type="checkbox" value="Sanguine Order" /> Sanguine Order
              </label>
              <label class="org-item">
                <input type="checkbox" value="The Sentinels" /> The Sentinels
              </label>
              <label class="org-item">
                <input type="checkbox" value="The Shield" /> The Shield
              </label>
              <label class="org-item">
                <input type="checkbox" value="THoTH" /> THoTH
              </label>
            </div>
          </div>
        </div>

        <!-- Skill Points under Tier -->
        <div class="section-row">
          <div class="field">
            <label>Skill Points</label>
            <div class="inline">
              <input type="number" id="totalSkillPoints" readonly style="max-width:80px;" />
              <span class="pill">events − spent</span>
            </div>
          </div>
          <div class="field">
            <!-- placeholder -->
          </div>
        </div>
      </div>
    </div>

    <!-- SKILLS -->
    <div class="card">
      <div class="card-inner">
        <h2>Skills</h2>

        <!-- Compact skills row -->
        <div class="skills-row">
          <div class="field">
            <label for="skillPath">Path / Profession</label>
            <select id="skillPath" class="select-path">
              <option value="">-- Select Path / Profession --</option>
            </select>
          </div>

          <div class="field inline skill-free-field">
            <label for="skillFreeFlag">Earned for Free?</label>
            <input type="checkbox" id="skillFreeFlag" />
          </div>

          <div class="field">
            <label for="skillSelect">Skill</label>
            <select id="skillSelect">
              <option value="">-- Select Skill --</option>
            </select>
          </div>

          <div class="field skill-add-field">
            <label>&nbsp;</label>
            <button class="button small" id="addSkillBtn">Add Skill</button>
          </div>
        </div>

        <div class="field">
          <label for="skillDescription">Skill Description</label>
          <textarea id="skillDescription" readonly></textarea>
        </div>

        <div class="field">
          <label>Selected Skills</label>
          <table>
            <thead>
              <tr>
                <th></th>
                <th>Tier</th>
                <th>Path / Profession</th>
                <th>Skill Name</th>
                <th>Cost</th>
              </tr>
            </thead>
            <tbody id="selectedSkillsBody"></tbody>
          </table>
          <div class="total-row">
            Total skill points spent on non-free skills: <span id="totalSkillCost">0</span>
          </div>
        </div>
      </div>
    </div>

    <!-- EVENTS -->
    <div class="card">
      <div class="card-inner">
        <h2>Events</h2>

        <table>
          <thead>
            <tr>
              <th></th>
              <th>Event Name</th>
              <th>Date</th>
              <th>Type</th>
              <th>NPC?</th>
              <th>Merchant<br>OT?</th>
              <th>Bonus SP</th>
              <th>Skill Pts</th>
            </tr>
          </thead>
          <tbody id="eventsBody"></tbody>
        </table>

        <div class="field" style="margin-top:8px; align-items:flex-start; width:auto;">
          <button class="button small secondary" id="addEventBtn" title="Add Event" style="min-width:32px; justify-content:center;">+</button>
        </div>

        <div class="total-row">
          Total event skill points: <span id="totalEventPoints">0</span> •
          Qualifying events for Tier: <span id="qualifyingEventsCount">0</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Logic -->
  <script src="script.js"></script>
</body>
</html>

